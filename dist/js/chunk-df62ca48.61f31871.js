(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-df62ca48"],{5319:function(e,a,t){"use strict";var r=t("d784"),o=t("825a"),i=t("7b0b"),n=t("50c4"),s=t("a691"),m=t("1d80"),l=t("8aa5"),c=t("14c3"),u=Math.max,d=Math.min,f=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,b=/\$([$&'`]|\d\d?)/g,h=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,a,t,r){var p=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,N=r.REPLACE_KEEPS_$0,g=p?"$":"$0";return[function(t,r){var o=m(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,o,r):a.call(String(o),t,r)},function(e,r){if(!p&&N||"string"===typeof r&&-1===r.indexOf(g)){var i=t(a,e,this,r);if(i.done)return i.value}var m=o(e),f=String(this),v="function"===typeof r;v||(r=String(r));var b=m.global;if(b){var T=m.unicode;m.lastIndex=0}var S=[];while(1){var D=c(m,f);if(null===D)break;if(S.push(D),!b)break;var _=String(D[0]);""===_&&(m.lastIndex=l(f,n(m.lastIndex),T))}for(var k="",w=0,x=0;x<S.length;x++){D=S[x];for(var y=String(D[0]),A=u(d(s(D.index),f.length),0),E=[],M=1;M<D.length;M++)E.push(h(D[M]));var I=D.groups;if(v){var q=[y].concat(E,A,f);void 0!==I&&q.push(I);var R=String(r.apply(void 0,q))}else R=$(y,f,A,E,I,r);A>=w&&(k+=f.slice(w,A)+R,w=A+y.length)}return k+f.slice(w)}];function $(e,t,r,o,n,s){var m=r+e.length,l=o.length,c=b;return void 0!==n&&(n=i(n),c=v),a.call(s,c,(function(a,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(m);case"<":s=n[i.slice(1,-1)];break;default:var c=+i;if(0===c)return a;if(c>l){var u=f(c/10);return 0===u?a:u<=l?void 0===o[u-1]?i.charAt(1):o[u-1]+i.charAt(1):a}s=o[c-1]}return void 0===s?"":s}))}}))},"5a3a":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"container"},[t("h1",{staticClass:"title"},[e._v(" Add New Match ")]),t("b-overlay",{attrs:{show:e.loadingState},scopedSlots:e._u([{key:"overlay",fn:function(){return[t("loading")]},proxy:!0}])},[t("b-form",{on:{submit:function(a){return a.preventDefault(),e.onAddMatch(a)},reset:function(a){return a.preventDefault(),e.onReset(a)}}},[t("b-form-group",{attrs:{id:"input-group-match-date","label-cols-sm":"3",label:"Match Date:","label-for":"matchDate"}},[t("b-form-input",{attrs:{id:"matchDate",type:"datetime-local",state:e.validateState("matchDate")},model:{value:e.$v.form.matchDate.$model,callback:function(a){e.$set(e.$v.form.matchDate,"$model",a)},expression:"$v.form.matchDate.$model"}}),e.$v.form.matchDate.required?e._e():t("b-form-invalid-feedback",[e._v(" Match Date is required ")]),e.$v.form.matchDate.checkMatchYear?e._e():t("b-form-invalid-feedback",[e._v(" League year is: 2021-2022 ")])],1),t("b-form-group",{attrs:{id:"input-group-local-team-name","label-cols-sm":"3",label:"Local Team :","label-for":"localTeamName"}},[t("b-form-select",{attrs:{id:"localTeamName",options:e.teamsNames,state:e.validateState("localTeamName")},scopedSlots:e._u([{key:"first",fn:function(){return[t("b-form-select-option",{attrs:{value:"",disabled:""}},[e._v("-- Please Select Local Team --")])]},proxy:!0}]),model:{value:e.$v.form.localTeamName.$model,callback:function(a){e.$set(e.$v.form.localTeamName,"$model",a)},expression:"$v.form.localTeamName.$model"}}),e.$v.form.localTeamName.required?e.$v.form.localTeamName.sameAsVisitorTeam?e._e():t("b-form-invalid-feedback",[e._v(" Local team can't be the same as visitor team ")]):t("b-form-invalid-feedback",[e._v(" Local Team is required ")])],1),t("b-form-group",{attrs:{id:"input-group-visitor-team-name","label-cols-sm":"3",label:"Visitor Team :","label-for":"visitorTeamName"}},[t("b-form-select",{attrs:{id:"visitorTeamName",options:e.teamsNames,state:e.validateState("visitorTeamName")},scopedSlots:e._u([{key:"first",fn:function(){return[t("b-form-select-option",{attrs:{value:"",disabled:""}},[e._v("-- Please Select Visitor Team --")])]},proxy:!0}]),model:{value:e.$v.form.visitorTeamName.$model,callback:function(a){e.$set(e.$v.form.visitorTeamName,"$model",a)},expression:"$v.form.visitorTeamName.$model"}}),e.$v.form.visitorTeamName.required?e.$v.form.visitorTeamName.sameAsLocalTeam?e._e():t("b-form-invalid-feedback",[e._v(" Visitor team can't be the same as local team ")]):t("b-form-invalid-feedback",[e._v(" Visitor team is required ")])],1),t("b-form-group",{attrs:{id:"input-group-venue-name","label-cols-sm":"3",label:"venue :","label-for":"venueName"}},[t("b-form-select",{attrs:{id:"venueName",options:e.venuesNames,state:e.validateState("venueName")},scopedSlots:e._u([{key:"first",fn:function(){return[t("b-form-select-option",{attrs:{value:"",disabled:""}},[e._v("-- Please Select Venue --")])]},proxy:!0}]),model:{value:e.$v.form.venueName.$model,callback:function(a){e.$set(e.$v.form.venueName,"$model",a)},expression:"$v.form.venueName.$model"}}),e.$v.form.venueName.required?e._e():t("b-form-invalid-feedback",[e._v(" Venue is required ")])],1),t("b-form-group",{attrs:{id:"input-group-referee-id","label-cols-sm":"3",label:"Referee :","label-for":"refereeID"}},[t("b-table",{ref:"refereeTable",attrs:{id:"referees-table","table-variant":"light","head-variant":"light",responsive:"sm",hover:"",bordered:"",striped:"",outlined:"","no-border-collapse":"",selectable:"","select-mode":"single",items:e.referees,fields:e.refereeFields},on:{"row-selected":e.onRowSelected},scopedSlots:e._u([{key:"cell(selected)",fn:function(a){var r=a.rowSelected;return[r?[t("span",{attrs:{"aria-hidden":"true"}},[e._v("âœ“")]),t("span",{staticClass:"sr-only"},[e._v("Selected")])]:[t("span",{attrs:{"aria-hidden":"true"}}),t("span",{staticClass:"sr-only"},[e._v("Not selected")])]]}}])})],1),t("b-button",{attrs:{type:"reset",variant:"danger",id:"reset-add-match"}},[e._v(" Reset ")]),t("b-button",{staticClass:"ml-5 w-25",attrs:{disabled:this.$v.form.$invalid,type:"submit",variant:"primary"}},[e._v(" Add Match ")])],1),e.form.submitError?t("b-alert",{staticClass:"mt-2",attrs:{variant:"warning",dismissible:"",show:""},on:{dismissed:e.rebootError}},[e._v(" Add New Match Failed: "+e._s(e.form.submitError)+" ")]):e._e(),t("div",{attrs:{id:"return-btn-div"}},[t("b-button",{attrs:{variant:"primary",size:"md",id:"btn-back-league-page"},on:{click:e.moveToLeaguePage}},[e._v(" Return League Management Page ")])],1)],1)],1)},o=[],i=(t("d81d"),t("fb6a"),t("0d03"),t("ac1f"),t("5319"),t("96cf"),t("1da1")),n=t("b5ae"),s=t("c428"),m={name:"Match",components:{Loading:s["a"]},data:function(){return{form:{matchDate:"",localTeamName:"",visitorTeamName:"",venueName:"",refereeID:void 0,submitError:void 0},refereeFields:["selected","refereeID","firstName","lastName","course"],loadingState:!1}},methods:{validateState:function(e){var a=this.$v.form[e],t=a.$dirty,r=a.$error;return t?!r:null},onAddMatch:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.$v.form.$touch(),t=e.finalValidation(),!t.badDetails){a.next=5;break}return e.form.submitError=t.message,a.abrupt("return");case 5:if(!e.$v.form.$anyError){a.next=7;break}return a.abrupt("return");case 7:return a.next=9,e.addNewMatch();case 9:case"end":return a.stop()}}),a)})))()},onReset:function(){var e=this;this.form={matchDate:"",localTeamName:"",visitorTeamName:"",venueName:"",refereeID:void 0,submitError:void 0},this.$refs.refereeTable.clearSelected(),this.$nextTick((function(){e.$v.$reset()}))},addNewMatch:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var t,r,o,i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.loadingState=!0,r=e.formatDateTime(e.form.matchDate),o={matchDate:r,localTeamName:e.form.localTeamName,visitorTeamName:e.form.visitorTeamName,venueName:e.form.venueName},i=null===(t=e.form)||void 0===t?void 0:t.refereeID,e.axios.defaults.withCredentials=!0,a.next=8,e.axios.post(e.$root.store.serverUrl+"unionAgent/match",{matchInformation:o,refereeID:i});case 8:if(n=a.sent,201!=n.status){a.next=14;break}return e.$root.store.initDataForUnionAgent().then(),a.next=13,e.$root.store.getCurrentStageMatches();case 13:e.$root.toast("Add New Match","Match Added successfully","success");case 14:e.axios.defaults.withCredentials=!1,e.loadingState=!1,e.onReset(),a.next=23;break;case 19:a.prev=19,a.t0=a["catch"](0),e.axios.defaults.withCredentials=!1,e.form.submitError=a.t0.response.data;case 23:case"end":return a.stop()}}),a,null,[[0,19]])})))()},formatDateTime:function(e){var a=e.slice(0,19).replace("T"," ");return a+=":00",a},onRowSelected:function(e){var a;this.form.refereeID=null===(a=e[0])||void 0===a?void 0:a.refereeID},moveToLeaguePage:function(){this.$router.push("/unionAgent/leagueManagement")},finalValidation:function(){var e=this,a=this.formatDateTime(this.form.matchDate),t="",r=[],o=!1,i="";return new Date(this.form.matchDate)<new Date?(t="matchDateAndTime",r=JSON.parse(localStorage.getItem("leaguePastMatches"))):(t="matchDate",r=JSON.parse(localStorage.getItem("leagueFutureMatches"))),r.map((function(r){r[t]==a&&r.venueName==e.form.venueName&&r.localTeamName==e.form.localTeamName&&r.visitorTeamName==e.form.visitorTeamName?(o=!0,i="Match all ready exist"):r[t]==a&&r.venueName==e.form.venueName?(o=!0,i="Venue not available"):r[t]==a&&r.localTeamName==e.form.localTeamName?(o=!0,i="Local team not available"):r[t]==a&&r.visitorTeamName==e.form.visitorTeamName&&(o=!0,i="Visitor team not available")})),{badDetails:o,message:i}},rebootError:function(){this.form.submitError=void 0}},computed:{teamsNames:function(){return JSON.parse(localStorage.getItem("teamsNames"))},venuesNames:function(){return JSON.parse(localStorage.getItem("venuesNames"))},referees:function(){var e=[],a=JSON.parse(localStorage.getItem("referees"));return a&&a.map((function(a){e.push({refereeID:a.refereeID,firstName:a.firstname,lastName:a.lastname,course:a.course})})),e}},validations:{form:{matchDate:{required:n["required"],checkMatchYear:function(e){var a=e.slice(0,4);return"2021"==a||"2022"==a}},localTeamName:{required:n["required"],sameAsVisitorTeam:Object(n["not"])(Object(n["sameAs"])("visitorTeamName"))},visitorTeamName:{required:n["required"],sameAsLocalTeam:Object(n["not"])(Object(n["sameAs"])("localTeamName"))},venueName:{required:n["required"]}}}},l=m,c=(t("71cf"),t("2877")),u=Object(c["a"])(l,r,o,!1,null,"12afc52e",null);a["default"]=u.exports},"5c78":function(e,a,t){},"71cf":function(e,a,t){"use strict";var r=t("5c78"),o=t.n(r);o.a}}]);
//# sourceMappingURL=chunk-df62ca48.61f31871.js.map